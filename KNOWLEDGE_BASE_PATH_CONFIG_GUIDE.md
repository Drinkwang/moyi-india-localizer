# 知识库路径配置功能使用指南

## 🎯 功能概述

这个功能允许用户自定义知识库的存储路径，支持数据迁移、路径验证和高级配置选项。

## 🚀 快速使用

### 1. 打开配置界面
- 在主界面点击 **"知识库配置"** 按钮
- 配置对话框将显示当前知识库路径和相关设置

### 2. 更改知识库路径
1. **输入新路径**：在"选择新的知识库路径"输入框中输入路径
2. **浏览选择**：点击"浏览..."按钮选择文件夹
3. **验证路径**：点击"验证路径"确保路径有效
4. **应用更改**：确认后点击"应用更改"

### 3. 数据迁移选项
- ☑️ **迁移现有数据到新路径**：自动将现有术语库迁移到新位置
- ☑️ **启用自动备份**：定期备份知识库数据

## 🔧 界面功能详解

### 当前路径显示
```
当前知识库路径: data/knowledge_base/
```
- 显示系统正在使用的知识库路径
- 只读显示，不可直接编辑

### 路径选择与验证
```
选择新的知识库路径: [输入框] [浏览...] [验证路径]
路径状态: ✅ 路径有效 (空目录)
```

**路径状态说明：**
- `未验证` - 尚未验证路径
- `✅ 路径有效 (空目录)` - 路径可用，无现有数据
- `✅ 路径有效 (包含现有数据)` - 路径可用，包含知识库数据
- `❌ 路径不能为空` - 路径输入错误
- `❌ 无法创建或访问该路径` - 权限或路径问题

### 高级设置
```
缓存大小: [1000] (100-10000)
相似度阈值: [0.6] (0.0-1.0)
```

- **缓存大小**：内存中保存的术语数量，影响检索速度
- **相似度阈值**：模糊匹配的敏感度，值越高匹配越严格

## 📁 支持的路径格式

### Windows系统
```
C:\Users\用户名\Documents\KnowledgeBase\
D:\Projects\TranslationTool\knowledge_base\
相对路径: data\knowledge_base\
```

### macOS/Linux系统
```
/Users/用户名/Documents/KnowledgeBase/
/home/用户名/projects/knowledge_base/
相对路径: data/knowledge_base/
```

### 网络路径（Windows）
```
\\服务器名\共享文件夹\knowledge_base\
```

## 🔄 数据迁移流程

### 自动迁移（推荐）
1. 选择新路径并验证
2. 确保"迁移现有数据到新路径"选项已勾选
3. 点击"应用更改"
4. 系统自动复制所有文件到新位置

### 迁移过程显示
```
✅ 知识库路径更新成功
已迁移 156 个文件
```

### 手动迁移
如果取消自动迁移选项：
1. 手动复制 `原路径/documents/` 到 `新路径/documents/`
2. 手动复制 `原路径/index/` 到 `新路径/index/`
3. 手动复制 `原路径/cache/` 到 `新路径/cache/`

## ⚙️ 配置文件更新

路径更改会自动更新 `resources/configs/app_config.json`：

```json
{
  "knowledge_base": {
    "root_path": "D:/MyKnowledgeBase/",
    "auto_backup": true,
    "max_cache_size": 1000,
    "similarity_threshold": 0.6
  }
}
```

## 🛠️ 故障排除

### 常见问题

**问题1：路径验证失败**
```
❌ 无法创建或访问该路径
```
**解决方案：**
- 检查路径是否存在
- 确认对该目录有读写权限
- 避免使用受保护的系统目录

**问题2：数据迁移失败**
```
❌ 路径更新失败: 数据迁移失败: 复制文件失败
```
**解决方案：**
- 确保目标路径有足够的磁盘空间
- 检查文件是否被其他程序占用
- 临时关闭杀毒软件的实时保护

**问题3：权限不足**
```
❌ 目录不可写
```
**解决方案：**
- 选择用户目录下的路径
- 以管理员身份运行程序
- 手动创建目录并设置权限

### 调试模式
开启调试信息查看详细日志：
```
📁 创建目录: D:/MyKnowledgeBase/documents/game_terms/
📦 已迁移 156 个文件
✅ 知识库路径已更改为: D:/MyKnowledgeBase/
```

## 💡 最佳实践

### 1. 路径选择建议
- **个人使用**：选择用户文档目录
- **团队协作**：使用网络共享目录
- **性能优化**：选择SSD存储的路径
- **备份考虑**：避免临时目录

### 2. 定期维护
- 定期备份知识库文件
- 清理过期的缓存数据
- 监控磁盘使用情况

### 3. 团队协作设置
```
网络路径示例: \\fileserver\shared\translation_kb\
缓存大小: 2000 (团队使用建议更大缓存)
自动备份: 启用
```

## 🔗 相关功能

### 配合使用的功能
- **翻译模板配置**：自定义翻译规则
- **术语导入工具**：批量导入术语数据
- **知识库管理**：浏览和编辑术语库

### 快速访问
- **打开文件夹**：直接在文件管理器中打开知识库目录
- **重置为默认**：快速恢复到默认配置
- **实时验证**：输入路径时自动验证可用性

## 📊 性能影响

### 路径选择对性能的影响
| 存储类型 | 读取速度 | 写入速度 | 推荐度 |
|---------|---------|---------|---------|
| 本地SSD | 极快 | 极快 | ⭐⭐⭐⭐⭐ |
| 本地HDD | 快 | 中等 | ⭐⭐⭐⭐ |
| 网络存储 | 中等 | 慢 | ⭐⭐⭐ |
| 云同步目录 | 中等 | 慢 | ⭐⭐ |

### 缓存设置建议
- **小型项目** (< 1000 术语)：缓存大小 500
- **中型项目** (1000-5000 术语)：缓存大小 1000
- **大型项目** (> 5000 术语)：缓存大小 2000+

## 🚀 高级技巧

### 1. 批量路径管理
为不同项目创建不同的知识库：
```
D:\Projects\GameA\knowledge_base\
D:\Projects\GameB\knowledge_base\
D:\Projects\CommonTerms\knowledge_base\
```

### 2. 自动化脚本
创建批处理脚本快速切换知识库：
```batch
# switch_kb.bat
echo 切换到项目A知识库
# 调用程序API或配置文件修改
```

### 3. 版本控制集成
将知识库目录添加到Git版本控制：
```bash
git init D:\MyKnowledgeBase\
git add documents/ index/
git commit -m "初始化知识库"
```

这样可以跟踪术语库的变更历史，方便团队协作和版本回退。 